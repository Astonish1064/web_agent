# InfiniteWeb - è‡ªåŠ¨åŒ–ç½‘ç«™ç”Ÿæˆç³»ç»Ÿ

InfiniteWeb æ˜¯ä¸€ä¸ªåŸºäº LLM çš„è‡ªåŠ¨åŒ–ç½‘ç«™ç”Ÿæˆç³»ç»Ÿï¼Œèƒ½å¤Ÿä»ä¸€ä¸ªä¸»é¢˜è¯ï¼ˆå¦‚ "online_bookstore"ï¼‰è‡ªåŠ¨ç”Ÿæˆå®Œæ•´çš„ç½‘ç«™åº”ç”¨ï¼ŒåŒ…æ‹¬å‰ç«¯ HTML/CSSã€åç«¯é€»è¾‘å’Œè¯„ä¼°è„šæœ¬ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.12+
- å¯è®¿é—®çš„ LLM API ç«¯ç‚¹ï¼ˆOpenAI å…¼å®¹ï¼‰

### å®‰è£…

```bash
cd infiniteweb_repro
pip install -r requirements.txt  # å¦‚æœ‰
```

### é…ç½® LLM

ç¼–è¾‘ `src/llm.py` ä¸­çš„é…ç½®ï¼š

```python
def __init__(self, 
    base_url="http://10.166.75.190:8000/v1",  # LLM æœåŠ¡åœ°å€
    api_key="EMPTY",
    model="/volume/pt-train/models/Qwen3-Coder-480B-A35B-Instruct"  # æ¨¡å‹è·¯å¾„
):
```

### è¿è¡Œ

**å¼‚æ­¥ç®¡çº¿ï¼ˆæ¨èï¼‰**ï¼š
```bash
python3 -m src.main_async
```

**åŒæ­¥ç®¡çº¿**ï¼š
```bash
python3 -m src.main
```

è¾“å‡ºç›®å½•ï¼š`output/<topic>/`

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
infiniteweb_repro/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ generators/          # 9 ä¸ªæ ¸å¿ƒç”Ÿæˆå™¨
â”‚   â”‚   â”œâ”€â”€ task_generator.py       # ä»»åŠ¡ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ interface_designer.py   # æ¥å£è®¾è®¡
â”‚   â”‚   â”œâ”€â”€ architecture_designer.py # æ¶æ„è®¾è®¡
â”‚   â”‚   â”œâ”€â”€ data_generator.py       # æ•°æ®ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ backend_generator.py    # åç«¯é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ page_designer.py        # é¡µé¢è®¾è®¡
â”‚   â”‚   â”œâ”€â”€ frontend_generator.py   # å‰ç«¯ä»£ç 
â”‚   â”‚   â”œâ”€â”€ instrumentation_generator.py # ç›‘æµ‹æ³¨å…¥
â”‚   â”‚   â””â”€â”€ evaluator_generator.py  # è¯„ä¼°å™¨
â”‚   â”œâ”€â”€ prompts/library.py   # 17 ä¸ª Prompt æ¨¡æ¿
â”‚   â”œâ”€â”€ pipeline.py          # åŒæ­¥ç®¡çº¿
â”‚   â”œâ”€â”€ async_pipeline.py    # å¼‚æ­¥ç®¡çº¿
â”‚   â”œâ”€â”€ llm.py               # LLM æä¾›è€…
â”‚   â”œâ”€â”€ validation.py        # Schema æ ¡éªŒ
â”‚   â”œâ”€â”€ utils.py             # å·¥å…·å‡½æ•°ï¼ˆå«é‡è¯•æœºåˆ¶ï¼‰
â”‚   â””â”€â”€ domain.py            # æ•°æ®æ¨¡å‹
â”œâ”€â”€ tests/                   # æµ‹è¯•å¥—ä»¶
â”‚   â”œâ”€â”€ test_*.py            # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ integration/         # é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ system/              # ç³»ç»Ÿæµ‹è¯•
â””â”€â”€ output/                  # ç”Ÿæˆè¾“å‡º
```

---

## ğŸ”„ ç”Ÿæˆæµç¨‹

```
ä¸»é¢˜è¯ (e.g., "online_bookstore")
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 1: Planning (è§„åˆ’)                â”‚
â”‚  Tasks â†’ Interfaces â†’ Architecture      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚ (å¹¶è¡Œ)
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend Branch   â”‚  â”‚  Frontend Branch â”‚
â”‚  Data â†’ Logic     â”‚  â”‚  Framework       â”‚
â”‚  â†’ Instrumentationâ”‚  â”‚  â†’ Pages (å¹¶è¡Œ)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Output: logic.js, *.html, evaluator.js â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ›¡ï¸ å¥å£®æ€§ç‰¹æ€§

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **æ™ºèƒ½é‡è¯•** | å¸¦æŒ‡æ•°é€€é¿å’ŒæŠ–åŠ¨çš„è‡ªåŠ¨é‡è¯•æœºåˆ¶ |
| **Schema æ ¡éªŒ** | å¤§å°å†™ä¸æ•æ„Ÿçš„ JSON ç»“æ„éªŒè¯ |
| **å¹¶å‘æ§åˆ¶** | Semaphore é™æµï¼Œé˜²æ­¢ API è¿‡è½½ |
| **å¼‚å¸¸å¤„ç†** | ä¼˜é›…é™çº§ï¼Œä¸å› å•ç‚¹å¤±è´¥è€Œå´©æºƒ |

---

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest tests/

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/test_task_generator.py -v

# è¿è¡Œå¼‚æ­¥ç®¡çº¿æµ‹è¯•
pytest tests/test_async_pipeline.py -v
```

**æµ‹è¯•è¦†ç›–**ï¼š67 å•å…ƒæµ‹è¯• + 6 é›†æˆæµ‹è¯• + 4 ç³»ç»Ÿæµ‹è¯•

---

## âš™ï¸ é«˜çº§é…ç½®

### è°ƒæ•´å¹¶å‘åº¦

åœ¨ `src/async_pipeline.py` ä¸­ï¼š

```python
AsyncWebGenPipeline(..., max_concurrency=3)  # é»˜è®¤ä¸º 1
```

### è°ƒæ•´é‡è¯•æ¬¡æ•°

åœ¨ `src/utils.py` ä¸­ï¼š

```python
@with_retry(max_retries=5, delay=1.0)  # é»˜è®¤ 5 æ¬¡
```

---

## ğŸ“ è¾“å‡ºç¤ºä¾‹

æˆåŠŸè¿è¡Œåï¼Œ`output/bookstore_async/` ç›®å½•åŒ…å«ï¼š

```
output/bookstore_async/
â”œâ”€â”€ logic.js        # åç«¯ä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ index.html      # é¦–é¡µ
â”œâ”€â”€ product.html    # å•†å“è¯¦æƒ…é¡µ
â”œâ”€â”€ cart.html       # è´­ç‰©è½¦
â”œâ”€â”€ checkout.html   # ç»“ç®—é¡µ
â””â”€â”€ evaluator.js    # è¯„ä¼°è„šæœ¬
```

---

## ğŸ”§ æ•…éšœæ’æŸ¥

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| `LLM Error: 404` | æ¨¡å‹è·¯å¾„é”™è¯¯ | è¿è¡Œ `curl http://<IP>:8000/v1/models` æŸ¥çœ‹å¯ç”¨æ¨¡å‹ |
| `Task Parsing Failed` | JSON æ ¼å¼é”™è¯¯ | æ£€æŸ¥æ¨¡å‹æ˜¯å¦æ­£ç¡®è¾“å‡º JSON |
| åªç”Ÿæˆ logic.js | Architecture å¤±è´¥ | æ£€æŸ¥ DEBUG æ—¥å¿—ä¸­çš„ pages æ•°é‡ |

---

## ğŸ“„ License

MIT
